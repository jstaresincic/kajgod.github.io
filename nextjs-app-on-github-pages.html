<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Next.js app on GitHub Pages</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/02cc69502bbb7f38.css" as="style"/><link rel="stylesheet" href="/_next/static/css/02cc69502bbb7f38.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-f2e125da23ccdc4a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-13c6f541b8685723.js" defer=""></script><script src="/_next/static/chunks/996-c5e5aa4c30f33066.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-0ef81f658da7da35.js" defer=""></script><script src="/_next/static/DD18XsjootyJs0pzHa-M1/_buildManifest.js" defer=""></script><script src="/_next/static/DD18XsjootyJs0pzHa-M1/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main><h2><a href="/">&lt;&lt; </a>Next.js app on GitHub Pages</h2><p class="small">20230109</p><div><p>I never tried Github Pages before, but I figured I wanted to try it out. Also, writing about code, it has a <em>clean code</em> feel to it, encapsulating the thoughts and ideas with related work.</p><p>Being an amateur artist in spare time, I figured I should have two completely separate blogs for documenting two completely separate domains, but again - the second blog should also encapsulate "art" with thoughts about art.</p><p>On a more-or-less unrelated note: I wanted to make a blog it would be very easy to add to. I'm planning to make a golang CMS for it which would be offline and create the content in SSG-ed HTML, easy to server on Github Pages. To lessen the code-writing I have to do (albeit complicate the process a bit) I decided to parse JSON created in CMS with Next.js. Now, Next is something I know quite well. The thought of trying something more egzotic and hip like Qwik, Fresh or Astro certainly crossed my mind, but I wanted this thing live as soon as possible, so...</p><p>Which leads us to the first WTF moment on Github Pages</p><h3>WTF, Github?</h3><p>I followed the simplest flow to getting a Github Page: create a repo named {yourName}.github.io and place static HTML in the root. To do so I could have changed a Next config, but I wanted to keep Next separated from the generated page in a separate folder, so I rather just added a copy action to build scrip like so:</p><pre>next build && next export && cp -r out/* ../</pre><p>Well, it didn't work. At all.</p><p>Since I couldn't figure out what seems to be the matter, I handcrafted a simple HTML page and put it in the root. That was fine, but when I tried to serve Next code again: nothing. Now, Next creates a folder _next where it serves JS and such. Nothing from that directory gets served on Github Pages! Hmmmm... Could it be that Pages only serves files that are in the root? You cannot use any folders? Starting to get irate, and looking into Vercel hosting and abandoning the whole <em>encapsulation</em> idea, Duck Duck Go once again came to rescue!</p><p>Believe it or not, my dear friends, Github Pages considers any folder that starts with a _ as a Jekyll folder and ignores it when serving content. WTF? I never really used Jekyll (we have some CI/CD workflow at day job using it, but I never had to do much more than restart the computer running it) and it seems so random and odd to proclaim Jekyll so important that a default setting is - whatever starts with a _ will be overtaken by it?</p><p>On a positive note, the fix is quite simple:</p><pre>next build && next export && cp -r out/* ../ && touch ../.nojekyll</pre><p>...create an empty .nojekyll file in the root, and the blog page appears. Next is quite ubiquitous these days, so I guess I'm not the only one to run into this problem, and this short rant may actually prove useful to someone. You're welcome, if that happens to be you.</p></div></main><footer></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"nextjs-app-on-github-pages"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"nextjs-app-on-github-pages"},"buildId":"DD18XsjootyJs0pzHa-M1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>